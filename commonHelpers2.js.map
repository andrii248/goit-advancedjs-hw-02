{"version":3,"file":"commonHelpers2.js","sources":["../src/js/02-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst elements = {\n  datePicker: document.querySelector('input#datetime-picker'),\n  days: document.querySelector('span[data-days]'),\n  hours: document.querySelector('span[data-hours]'),\n  minutes: document.querySelector('span[data-minutes]'),\n  seconds: document.querySelector('span[data-seconds]'),\n  startBtn: document.querySelector('button[data-start]'),\n};\n\nlet countDown = null;\nlet intervalId = null;\nlet isActiveCountDown = false;\nelements.startBtn.setAttribute('disabled', 'true');\n\nelements.startBtn.addEventListener('click', handleStartBtn);\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    if (selectedDates[0] < options.defaultDate) {\n      iziToast.show({\n        title: 'Wrong date chosen',\n        message: 'Please choose a date in the future',\n        color: 'blue', // blue, red, green, yellow\n      });\n    } else {\n      elements.startBtn.removeAttribute('disabled');\n      countDown = selectedDates[0];\n    }\n  },\n  onOpen() {\n    clearInterval(intervalId);\n    isActiveCountDown = false;\n    elements.startBtn.setAttribute('disabled', 'true');\n  },\n};\n\nconst timer = {\n  start() {\n    if (isActiveCountDown) {\n      return;\n    }\n\n    isActiveCountDown = true;\n    intervalId = setInterval(() => {\n      const currentTime = Date.now();\n      const deltaTime = countDown - currentTime;\n      const { days, hours, minutes, seconds } = convertMs(deltaTime);\n\n      if (deltaTime <= 1000) {\n        this.stop();\n      }\n\n      updateCountDown({ days, hours, minutes, seconds });\n    }, 1000);\n  },\n\n  stop() {\n    clearInterval(intervalId);\n    isActiveCountDown = false;\n  },\n};\n\nflatpickr(elements.datePicker, options);\n\nfunction handleStartBtn() {\n  timer.start();\n  elements.startBtn.setAttribute('disabled', 'true');\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = addLeadingZero(Math.floor(ms / day));\n  // Remaining hours\n  const hours = addLeadingZero(Math.floor((ms % day) / hour));\n  // Remaining minutes\n  const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n  // Remaining seconds\n  const seconds = addLeadingZero(\n    Math.floor((((ms % day) % hour) % minute) / second)\n  );\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction updateCountDown({ days, hours, minutes, seconds }) {\n  elements.days.textContent = days;\n  elements.hours.textContent = hours;\n  elements.minutes.textContent = minutes;\n  elements.seconds.textContent = seconds;\n}\n"],"names":["elements","countDown","intervalId","isActiveCountDown","handleStartBtn","options","selectedDates","iziToast","timer","currentTime","deltaTime","days","hours","minutes","seconds","convertMs","updateCountDown","flatpickr","ms","addLeadingZero","value"],"mappings":"+IAKA,MAAMA,EAAW,CACf,WAAY,SAAS,cAAc,uBAAuB,EAC1D,KAAM,SAAS,cAAc,iBAAiB,EAC9C,MAAO,SAAS,cAAc,kBAAkB,EAChD,QAAS,SAAS,cAAc,oBAAoB,EACpD,QAAS,SAAS,cAAc,oBAAoB,EACpD,SAAU,SAAS,cAAc,oBAAoB,CACvD,EAEA,IAAIC,EAAY,KACZC,EAAa,KACbC,EAAoB,GACxBH,EAAS,SAAS,aAAa,WAAY,MAAM,EAEjDA,EAAS,SAAS,iBAAiB,QAASI,CAAc,EAE1D,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACjBA,EAAc,GAAKD,EAAQ,YAC7BE,EAAS,KAAK,CACZ,MAAO,oBACP,QAAS,qCACT,MAAO,MACf,CAAO,GAEDP,EAAS,SAAS,gBAAgB,UAAU,EAC5CC,EAAYK,EAAc,GAE7B,EACD,QAAS,CACP,cAAcJ,CAAU,EACxBC,EAAoB,GACpBH,EAAS,SAAS,aAAa,WAAY,MAAM,CAClD,CACH,EAEMQ,EAAQ,CACZ,OAAQ,CACFL,IAIJA,EAAoB,GACpBD,EAAa,YAAY,IAAM,CAC7B,MAAMO,EAAc,KAAK,MACnBC,EAAYT,EAAYQ,EACxB,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAS,EAEzDA,GAAa,KACf,KAAK,KAAI,EAGXM,EAAgB,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,CAAA,CAClD,EAAE,GAAI,EACR,EAED,MAAO,CACL,cAAcZ,CAAU,EACxBC,EAAoB,EACrB,CACH,EAEAc,EAAUjB,EAAS,WAAYK,CAAO,EAEtC,SAASD,GAAiB,CACxBI,EAAM,MAAK,EACXR,EAAS,SAAS,aAAa,WAAY,MAAM,CACnD,CAEA,SAASe,EAAUG,EAAI,CAQrB,MAAMP,EAAOQ,EAAe,KAAK,MAAMD,EAAK,KAAG,CAAC,EAE1CN,EAAQO,EAAe,KAAK,MAAOD,EAAK,MAAO,IAAI,CAAC,EAEpDL,EAAUM,EAAe,KAAK,MAAQD,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEjEJ,EAAUK,EACd,KAAK,MAASD,EAAK,MAAO,KAAQ,IAAU,GAAM,CACtD,EAEE,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASK,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASJ,EAAgB,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC1Dd,EAAS,KAAK,YAAcW,EAC5BX,EAAS,MAAM,YAAcY,EAC7BZ,EAAS,QAAQ,YAAca,EAC/Bb,EAAS,QAAQ,YAAcc,CACjC"}